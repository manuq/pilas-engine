<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="" >
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
          <title>Manejo de tiempo</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        { color: #cccccc; background-color: #303030; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ffcfaf; } /* Alert */
      code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
      code span.at { } /* Attribute */
      code span.bn { color: #dca3a3; } /* BaseN */
      code span.bu { } /* BuiltIn */
      code span.cf { color: #f0dfaf; } /* ControlFlow */
      code span.ch { color: #dca3a3; } /* Char */
      code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
      code span.co { color: #7f9f7f; } /* Comment */
      code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
      code span.do { color: #7f9f7f; } /* Documentation */
      code span.dt { color: #dfdfbf; } /* DataType */
      code span.dv { color: #dcdccc; } /* DecVal */
      code span.er { color: #c3bf9f; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #c0bed1; } /* Float */
      code span.fu { color: #efef8f; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
      code span.kw { color: #f0dfaf; } /* Keyword */
      code span.op { color: #f0efd0; } /* Operator */
      code span.ot { color: #efef8f; } /* Other */
      code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
      code span.sc { color: #dca3a3; } /* SpecialChar */
      code span.ss { color: #cc9393; } /* SpecialString */
      code span.st { color: #cc9393; } /* String */
      code span.va { } /* Variable */
      code span.vs { color: #cc9393; } /* VerbatimString */
      code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
    </style>
        <link rel="stylesheet" href="estilo.css" />
        <script src="./manual.js" charset="utf-8"></script>
      <div class="tc navegacion">
  <a href="index.html">Regresar al índice</a>
</div> 
  </head>
  <body>
         <header id="title-block-header">
      <h1 class="title">Manejo de tiempo</h1>
            </header>
      <p>Pilas ofrece varias formas de ejecutar funciones cada determinado tiempo. Esto es útil para crear enemigos, crear relojes para hacer más desafiante un juego o incluso para aumentar la dificultad de un juego.</p>
<h2 id="funciones-manejar-el-tiempo">Funciones manejar el tiempo</h2>
<p>Hay dos funciones principales en el temporizador de pilas:</p>
<ul>
<li><code>pilas.luego(cantidad_de_segundos_a_esperar, función)</code></li>
<li><code>pilas.cada(segundos_para_el_intervalo, función, veces_a_repetir: opcional)</code></li>
</ul>
<p>La primer función permite ejecutar una función luego de un periodo de tiempo. Por ejemplo, si queremos hacer que un actor diga algo luego de 3 segundos una vez que se coloca en pantalla podemos hacerlo escribiendo esta sentencia dentro del método <code>iniciar</code> del actor así:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb1-1"><a href="#cb1-1"></a>iniciar() {</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>  this<span class="op">.</span><span class="at">pilas</span><span class="op">.</span><span class="fu">luego</span>(<span class="dv">3</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-4"><a href="#cb1-4"></a>    this<span class="op">.</span><span class="fu">decir</span>(<span class="st">&quot;¡Han pasado 3 segundos!&quot;</span>)<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  })<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a>}</span></code></pre></div>
<p>Hay que tener en cuenta que esta función se ejecutará una sola vez.</p>
<p>La segunda función, llamada <code>pilas.cada</code>, permite invocar una función cada determinada cantidad de segundos, muy similar a la anterior, pero invoca la función que le pidamos varias veces.</p>
<p>Por ejemplo, imagina que queremos crear actores <code>pelota</code> cada medio segundo, podemos hacer algo así:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1"></a>pilas<span class="op">.</span><span class="fu">cada</span>(<span class="fl">0.5</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  var pelota <span class="op">=</span> pilas<span class="op">.</span><span class="at">actores</span><span class="op">.</span><span class="fu">pelota</span>()<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  pelota<span class="op">.</span><span class="at">y</span> <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  pelota<span class="op">.</span><span class="at">x</span> <span class="op">=</span> pilas<span class="op">.</span><span class="fu">azar</span>(<span class="op">-</span><span class="dv">200</span><span class="op">,</span> <span class="dv">200</span>)<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>})<span class="op">;</span></span></code></pre></div>
<p>Si ejecutas esas instrucciones, vas a ver en pantalla algo así. Cada medio segundo se creará un actor pelota en una posición diferente:</p>
<p><img src="imagenes/tiempo.assets/PilasEngine_tiempo.png" /></p>
<h2 id="cancelar-repeticiones-o-eliminar-temporizadores">Cancelar repeticiones o eliminar temporizadores</h2>
<p>Si utilizas la función <code>pilas.cada</code> para repetir una acción varias veces, es probable que ante una determinada condición quieras dejas de repetir la ejecución de la función.</p>
<p>Una forma de lograr esto es diciéndole a pilas cuantas veces tiene que repetir la función, por ejemplo, para llamar 5 veces una función cada dos segundos deberías llamar a la función así:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1"></a>var actor <span class="op">=</span> pilas<span class="op">.</span><span class="at">actores</span><span class="op">.</span><span class="fu">aceituna</span>()<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>pilas<span class="op">.</span><span class="fu">cada</span>(</span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dv">2</span><span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  () <span class="kw">=&gt;</span> {</span>
<span id="cb3-6"><a href="#cb3-6"></a>    actor<span class="op">.</span><span class="fu">decir</span>(<span class="st">&quot;prueba&quot;</span>)<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  }<span class="op">,</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="dv">5</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>)<span class="op">;</span></span></code></pre></div>
<p>Otra opción, es detener el temporizador directamente desde la función retornando <code>true</code>:</p>
<p>Por ejemplo, imagina que tienes un actor que se mueve 50 pixeles a la derecha cada 2 segundos, pero que quieres que deje de moverse cuando llegue a la posición x igual a 200. Podrías implementarlo de esta forma:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1"></a>var actor <span class="op">=</span> pilas<span class="op">.</span><span class="at">actores</span><span class="op">.</span><span class="fu">aceituna</span>()<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>pilas<span class="op">.</span><span class="fu">cada</span>(<span class="dv">2</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb4-4"><a href="#cb4-4"></a>  actor<span class="op">.</span><span class="at">x</span> <span class="op">+=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a>  if (actor<span class="op">.</span><span class="at">x</span> <span class="op">&gt;</span> <span class="dv">200</span>) {</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="co">// retornar este valor &#39;true&#39; hace que</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="co">// la función deje de llamarse cada</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="co">// dos segundos.</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>    return true<span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  }</span>
<span id="cb4-12"><a href="#cb4-12"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="métodos-especiales">Métodos especiales</h2>
<p>También existe un método llamado <code>cada_segundo</code> que los actores pueden utilizar para disparar una acción cada vez que transcurre un segundo en el juego. Por ejemplo, si queremos crear un actor que aumente su tamaño cada un segundo podemos definir el método así:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1"></a>class caja extends Actor {</span>
<span id="cb5-2"><a href="#cb5-2"></a>  cada_segundo() {</span>
<span id="cb5-3"><a href="#cb5-3"></a>    this<span class="op">.</span><span class="at">escala</span> <span class="op">+=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  }</span>
<span id="cb5-5"><a href="#cb5-5"></a>}</span></code></pre></div>
<p>O bien, si ya tenemos la referencia al actor también sería válido escribir algo así:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1"></a>var mi_actor <span class="op">=</span> pilas<span class="op">.</span><span class="fu">obtener_actor_por_nombre</span>(<span class="st">&quot;caja&quot;</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>mi_actor<span class="op">.</span><span class="at">cada_segundo</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb6-4"><a href="#cb6-4"></a>  mi_actor<span class="op">.</span><span class="at">escala</span> <span class="op">+=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  mi_actor<span class="op">.</span><span class="fu">decir</span>(<span class="st">&quot;¡pasó un segundo!&quot;</span>)<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>}<span class="op">;</span></span></code></pre></div>  <div class="tc navegacion">
  <div>
    <a href="#" onclick="document.documentElement.scrollTo(0, 0);">Subir</a>
  </div>

  <div>
    <a href="index.html">Regresar al índice</a>
  </div>
</div> 
  </body>
</html>
